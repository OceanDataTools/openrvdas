<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.6">
<title>logger.writers.writer API documentation</title>
<meta name="description" content="The biggest thing that the abstract parent class Writer now does is help
with (optional) type checking of the child class&#39; inputs. In the past, an
â€¦">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source > summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible;min-width:max-content}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin:1em 0}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
/* Collapse source docstrings */
setTimeout(() => {
[...document.querySelectorAll('.hljs.language-python > .hljs-string')]
.filter(el => el.innerHTML.length > 200 && ['"""', "'''"].includes(el.innerHTML.substring(0, 3)))
.forEach(el => {
let d = document.createElement('details');
d.classList.add('hljs-string');
d.innerHTML = '<summary>"""</summary>' + el.innerHTML.substring(3);
el.replaceWith(d);
});
}, 100);
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>logger.writers.writer</code></h1>
</header>
<section id="section-intro">
<p>The biggest thing that the abstract parent class Writer now does is help
with (optional) type checking of the child class' inputs. In the past, an
explicit, but very awkward, form of type checking was used, with child classes
passing the Transform class a list of input_format and output_format specifications.</p>
<p>That is now deprecated in favor of using Python's type hints. Type hints should be
specified for the child class' write() method. Then the write() method can
call self.can_process_record(record) to see whether it's one of the input types it
can handle. If not, it can "return self.digest_record(record) to have the parent
class try to deal with it:</p>
<p>E.g.:
def write(self, record: Union[int, str, float]):
if not self.can_process_record(record):
# inherited from BaseModule()
self.digest_record(record)
# inherited from BaseModule()
return
[do normal writing here&hellip;</p>
<p>If no type hints are specified, can_process_record() will return True for all
records <em>except</em> those of type "None" or "list". The logic is that digest_record()
will return a None when given a None, and when given a list, will iteratively
apply the write() to every element of the list in order.</p>
<p>Note that the child class can explicitly call super().<strong>init</strong>(quiet=True) or such
to initialize the type checking and set its debugging level. If it is not explicitly
initialized, it will be done implicitly the first time can_process_record() or
digest_record() are called, but with the default of quiet=False.</p>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="logger.writers.writer.TimestampedWriter"><code class="flex name class">
<span>class <span class="ident">TimestampedWriter</span></span>
<span>(</span><span>quiet=False, input_format=None)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class TimestampedWriter(Writer):
    &#34;&#34;&#34;
    A TimestampedWriter is a special case of a Writer where we
    can write out the timestamp associated with a record.
    &#34;&#34;&#34;

    ############################
    def __init__(self, quiet=False, input_format=None):
        super().__init__(quiet=quiet, input_format=input_format)

    ############################
    def write_timestamp(self, record, timestamp=None):
        raise NotImplementedError(&#39;Abstract base class TimestampedWriter has no &#39;
                                  &#39;implementation of write_timestamp() method.&#39;)</code></pre>
</details>
<div class="desc"><p>A TimestampedWriter is a special case of a Writer where we
can write out the timestamp associated with a record.</p>
<p>Abstract base class for data Writers.
```</p>
<p>quiet - if type checking should log type errors or operate silently.</p>
<p>Two additional arguments govern how records will be encoded/decoded
from bytes, if desired by the Writer subclass when it calls
_encode_str() or _decode_bytes:</p>
<p>encoding - 'utf-8' by default. If empty or None, do not attempt any
decoding and return raw bytes. Other possible encodings are
listed in online documentation here:
<a href="https://docs.python.org/3/library/codecs.html#standard-encodings">https://docs.python.org/3/library/codecs.html#standard-encodings</a></p>
<p>encoding_errors - 'ignore' by default. Other error strategies are
'strict', 'replace', and 'backslashreplace', described here:
<a href="https://docs.python.org/3/howto/unicode.html#encodings">https://docs.python.org/3/howto/unicode.html#encodings</a></p></div>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="logger.writers.writer.Writer" href="#logger.writers.writer.Writer">Writer</a></li>
<li><a title="logger.utils.base_module.BaseModule" href="../utils/base_module.html#logger.utils.base_module.BaseModule">BaseModule</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="logger.writers.writer.TimestampedWriter.write_timestamp"><code class="name flex">
<span>def <span class="ident">write_timestamp</span></span>(<span>self, record, timestamp=None)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def write_timestamp(self, record, timestamp=None):
    raise NotImplementedError(&#39;Abstract base class TimestampedWriter has no &#39;
                              &#39;implementation of write_timestamp() method.&#39;)</code></pre>
</details>
<div class="desc"></div>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="logger.writers.writer.Writer" href="#logger.writers.writer.Writer">Writer</a></b></code>:
<ul class="hlist">
<li><code><a title="logger.writers.writer.Writer.can_process_record" href="../utils/base_module.html#logger.utils.base_module.BaseModule.can_process_record">can_process_record</a></code></li>
<li><code><a title="logger.writers.writer.Writer.digest_record" href="../utils/base_module.html#logger.utils.base_module.BaseModule.digest_record">digest_record</a></code></li>
<li><code><a title="logger.writers.writer.Writer.write" href="#logger.writers.writer.Writer.write">write</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="logger.writers.writer.Writer"><code class="flex name class">
<span>class <span class="ident">Writer</span></span>
<span>(</span><span>quiet=False, input_format=None, encoding='utf-8', encoding_errors='ignore')</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Writer(BaseModule):
    &#34;&#34;&#34;
    Base class Writer about which we know nothing else. By default the
    input format is Unknown unless overridden.
    &#34;&#34;&#34;
    ############################

    def __init__(self, quiet=False, input_format=None,
                 encoding=&#39;utf-8&#39;, encoding_errors=&#39;ignore&#39;):
        &#34;&#34;&#34;Abstract base class for data Writers.
        ```

        quiet - if type checking should log type errors or operate silently.

        Two additional arguments govern how records will be encoded/decoded
        from bytes, if desired by the Writer subclass when it calls
        _encode_str() or _decode_bytes:

        encoding - &#39;utf-8&#39; by default. If empty or None, do not attempt any
                decoding and return raw bytes. Other possible encodings are
                listed in online documentation here:
                https://docs.python.org/3/library/codecs.html#standard-encodings

        encoding_errors - &#39;ignore&#39; by default. Other error strategies are
                &#39;strict&#39;, &#39;replace&#39;, and &#39;backslashreplace&#39;, described here:
                https://docs.python.org/3/howto/unicode.html#encodings
        &#34;&#34;&#34;
        self._initialize_type_hints(quiet=quiet)

        if input_format:
            logging.warning(f&#39;Code warning: {self.__class__.__name__} use of &#39;
                            &#39;&#34;input_format&#34; is deprecated. &#39;
                            &#39;Please see Transform code documentation.&#39;)

        # Make sure &#39;&#39; behaves the same as None, which is what all the
        # docstrings say, and would be logical... but then certain things treat
        # them differently (e.g., file.open(mode=&#39;ab&#39;, encoding=&#39;&#39;) throws
        # ValueError: binary mode doesn&#39;t take an encoding argument)
        if encoding == &#39;&#39;:
            encoding = None
        self.encoding = encoding
        self.encoding_errors = encoding_errors

    ############################
    def _initialize_type_hints(self, quiet=False):
        &#34;&#34;&#34; Retrieve any type hints for child write() method so we can
        check whether the type of record we&#39;ve received can be parsed
        natively or not.&#34;&#34;&#34;
        super()._initialize_type_hints(module_type=&#39;write&#39;,
                                       module_method=self.__class__.write,
                                       quiet=quiet)

    ############################
    def _unescape_str(self, the_str):
        &#34;&#34;&#34;Unescape a string by encoding it to bytes, then unescaping when we
        decode it. Ugly.
        &#34;&#34;&#34;
        if not self.encoding:
            return the_str

        encoded = the_str.encode(encoding=self.encoding, errors=self.encoding_errors)
        return encoded.decode(&#39;unicode_escape&#39;)

    ############################
    def _encode_str(self, the_str, unescape=False):
        &#34;&#34;&#34;Encode a string to bytes, optionally unescaping things like \n and \r.
        Unescaping requires ugly convolutions of encoding, then decoding while we
        escape things, then encoding a second time.
        &#34;&#34;&#34;
        if not self.encoding:
            return the_str
        if unescape:
            the_str = self._unescape_str(the_str)
        return the_str.encode(encoding=self.encoding, errors=self.encoding_errors)

    ############################
    def _decode_bytes(self, record):
        &#34;&#34;&#34;Decode a record from bytes to str, if we have an encoding specified.&#34;&#34;&#34;
        if not record:
            return None

        if not self.encoding:
            return record

        try:
            return record.decode(encoding=self.encoding,
                                 errors=self.encoding_errors)
        except UnicodeDecodeError as e:
            logging.warning(&#39;Error decoding string &#34;%s&#34; from encoding &#34;%s&#34;: %s&#39;,
                            record, self.encoding, str(e))
            return None

    ############################
    def write(self, record):
        &#34;&#34;&#34;Core method - write a record that we&#39;ve been passed.&#34;&#34;&#34;
        raise NotImplementedError(&#39;Class %s (subclass of Writer is missing &#39;
                                  &#39;implementation of write () method.&#39;
                                  % self.__class__.__name__)</code></pre>
</details>
<div class="desc"><p>Base class Writer about which we know nothing else. By default the
input format is Unknown unless overridden.</p>
<p>Abstract base class for data Writers.
```</p>
<p>quiet - if type checking should log type errors or operate silently.</p>
<p>Two additional arguments govern how records will be encoded/decoded
from bytes, if desired by the Writer subclass when it calls
_encode_str() or _decode_bytes:</p>
<p>encoding - 'utf-8' by default. If empty or None, do not attempt any
decoding and return raw bytes. Other possible encodings are
listed in online documentation here:
<a href="https://docs.python.org/3/library/codecs.html#standard-encodings">https://docs.python.org/3/library/codecs.html#standard-encodings</a></p>
<p>encoding_errors - 'ignore' by default. Other error strategies are
'strict', 'replace', and 'backslashreplace', described here:
<a href="https://docs.python.org/3/howto/unicode.html#encodings">https://docs.python.org/3/howto/unicode.html#encodings</a></p></div>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="logger.utils.base_module.BaseModule" href="../utils/base_module.html#logger.utils.base_module.BaseModule">BaseModule</a></li>
</ul>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="logger.writers.cached_data_writer.CachedDataWriter" href="cached_data_writer.html#logger.writers.cached_data_writer.CachedDataWriter">CachedDataWriter</a></li>
<li><a title="logger.writers.composed_writer.ComposedWriter" href="composed_writer.html#logger.writers.composed_writer.ComposedWriter">ComposedWriter</a></li>
<li><a title="logger.writers.database_writer.DatabaseWriter" href="database_writer.html#logger.writers.database_writer.DatabaseWriter">DatabaseWriter</a></li>
<li><a title="logger.writers.email_writer.EmailWriter" href="email_writer.html#logger.writers.email_writer.EmailWriter">EmailWriter</a></li>
<li><a title="logger.writers.file_writer.FileWriter" href="file_writer.html#logger.writers.file_writer.FileWriter">FileWriter</a></li>
<li><a title="logger.writers.influxdb_writer.InfluxDBWriter" href="influxdb_writer.html#logger.writers.influxdb_writer.InfluxDBWriter">InfluxDBWriter</a></li>
<li><a title="logger.writers.logfile_writer.LogfileWriter" href="logfile_writer.html#logger.writers.logfile_writer.LogfileWriter">LogfileWriter</a></li>
<li><a title="logger.writers.logger_manager_writer.LoggerManagerWriter" href="logger_manager_writer.html#logger.writers.logger_manager_writer.LoggerManagerWriter">LoggerManagerWriter</a></li>
<li><a title="logger.writers.mqtt_writer.MQTTWriter" href="mqtt_writer.html#logger.writers.mqtt_writer.MQTTWriter">MQTTWriter</a></li>
<li><a title="logger.writers.network_writer.NetworkWriter" href="network_writer.html#logger.writers.network_writer.NetworkWriter">NetworkWriter</a></li>
<li><a title="logger.writers.record_screen_writer.RecordScreenWriter" href="record_screen_writer.html#logger.writers.record_screen_writer.RecordScreenWriter">RecordScreenWriter</a></li>
<li><a title="logger.writers.redis_writer.RedisWriter" href="redis_writer.html#logger.writers.redis_writer.RedisWriter">RedisWriter</a></li>
<li><a title="logger.writers.regex_logfile_writer.RegexLogfileWriter" href="regex_logfile_writer.html#logger.writers.regex_logfile_writer.RegexLogfileWriter">RegexLogfileWriter</a></li>
<li><a title="logger.writers.serial_writer.SerialWriter" href="serial_writer.html#logger.writers.serial_writer.SerialWriter">SerialWriter</a></li>
<li><a title="logger.writers.socket_writer.SocketWriter" href="socket_writer.html#logger.writers.socket_writer.SocketWriter">SocketWriter</a></li>
<li><a title="logger.writers.tcp_writer.TCPWriter" href="tcp_writer.html#logger.writers.tcp_writer.TCPWriter">TCPWriter</a></li>
<li><a title="logger.writers.text_file_writer.TextFileWriter" href="text_file_writer.html#logger.writers.text_file_writer.TextFileWriter">TextFileWriter</a></li>
<li><a title="logger.writers.timeout_writer.TimeoutWriter" href="timeout_writer.html#logger.writers.timeout_writer.TimeoutWriter">TimeoutWriter</a></li>
<li><a title="logger.writers.udp_writer.UDPWriter" href="udp_writer.html#logger.writers.udp_writer.UDPWriter">UDPWriter</a></li>
<li><a title="logger.writers.websocket_writer.WebsocketWriter" href="websocket_writer.html#logger.writers.websocket_writer.WebsocketWriter">WebsocketWriter</a></li>
<li><a title="logger.writers.writer.TimestampedWriter" href="#logger.writers.writer.TimestampedWriter">TimestampedWriter</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="logger.writers.writer.Writer.write"><code class="name flex">
<span>def <span class="ident">write</span></span>(<span>self, record)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def write(self, record):
    &#34;&#34;&#34;Core method - write a record that we&#39;ve been passed.&#34;&#34;&#34;
    raise NotImplementedError(&#39;Class %s (subclass of Writer is missing &#39;
                              &#39;implementation of write () method.&#39;
                              % self.__class__.__name__)</code></pre>
</details>
<div class="desc"><p>Core method - write a record that we've been passed.</p></div>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="logger.utils.base_module.BaseModule" href="../utils/base_module.html#logger.utils.base_module.BaseModule">BaseModule</a></b></code>:
<ul class="hlist">
<li><code><a title="logger.utils.base_module.BaseModule.can_process_record" href="../utils/base_module.html#logger.utils.base_module.BaseModule.can_process_record">can_process_record</a></code></li>
<li><code><a title="logger.utils.base_module.BaseModule.digest_record" href="../utils/base_module.html#logger.utils.base_module.BaseModule.digest_record">digest_record</a></code></li>
</ul>
</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="logger.writers" href="index.html">logger.writers</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="logger.writers.writer.TimestampedWriter" href="#logger.writers.writer.TimestampedWriter">TimestampedWriter</a></code></h4>
<ul class="">
<li><code><a title="logger.writers.writer.TimestampedWriter.write_timestamp" href="#logger.writers.writer.TimestampedWriter.write_timestamp">write_timestamp</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="logger.writers.writer.Writer" href="#logger.writers.writer.Writer">Writer</a></code></h4>
<ul class="">
<li><code><a title="logger.writers.writer.Writer.write" href="#logger.writers.writer.Writer.write">write</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.6</a>.</p>
</footer>
</body>
</html>
